# Express

### 响应方法

#### express.Router()

模块化路由处理程序

以路由器创建为模块，装土中间件，定义路由，安装在主应用程序的路径中

然后在应用程序中装入路由模块

### 编写中间件

功能的封装方式。分装在程序中处理HTTP请求的功能

中间件由管道执行。

next()执行管道中的下一个中间件函数

中间件的装入顺序是有关系的，首先装入的被首先执行。

### 使用中间件

#### 应用层中间件

绑定到应用程序对象的实例。

可以为一个路径定义多个路由，但是第二不会被调用，因为第一个结束了请求/响应循环

跳过剩余中间件，next('route')，跳出当前管道的执行序列。把处理流程模块化，分到不同的中间件当中

#### 路由器层中间件

router.use()

router.METHOD()

#### 错误处理中间件

必须有四个参数，就算next没有用到，否则会被解释为常规中间件

#### 内置中间件

express.static(root, [options])

static 提供静态资源

每个应用程序可以有多个静态目录

#### 第三方中间件

npm安装

### Cookie

浏览器保存一定的由服务器发送的信息

#### 关于Cookie

非加密的。不建议加密之后存cookie。有加密就有解密，不建议把重要信息存入cookie

用户可以删除或者禁用Cookie。网站不能过于依赖cookie

一般的cookie能够被篡改。建议使用签名cookie

cookie可以用于攻击

不同浏览器对cookie大小、数量都有约束。不能滥用cookie

会话优于cookie。更安全。

#### Express中的Cookie

#### 会话

cookie被滥用，保存大量cookie不好。

由此考虑代替工作，减少cookie带来的负面问题：携带url或者html5本地存储。h5本地存储能够携带更多、大量的信息。h5能够提升到M级别

##### 会话的两种实现

* 基于cookie
* cookie只保存标识，其他东西存在服务器上。

##### 会话的用途

跨页保存用户偏好

提供用户验证信息。即使没有用户账户，也可以记录用户的偏好

建议优先使用会话。

