# 并发程序设计

并发进程：运行时的概念。多个程序同时运行，共享资源。

#### 顺序程序

封闭性 顺序型 确定性 可再现性

一旦多个程序并发，这些性质实际就被打破

多级反馈队列算法。抢占式。程序的指令在哪个时间片被分开，是不确定的，程序员无法预测程序在实际运行中的切片。因此，处理器的调度带有随机性，无法预知在哪个时间片切开，无法预知下一次时间片的开始。每两条机器指令之间都是开放的，可能随时被打断。不确定性，多程序并发，计算过程不可再现。

#### 进程的并发性

允许进程在执行时间上重叠。

一个时间段内，几个进程在同一个处理器上，处于运行未结束。

多个进程间，彼此制约和依赖。

#### 并发进程分类

无关：不依赖其他进程，可以独立执行。

交互的并发进程：发生家湖

Bernstein条件：可以同时读，但是不可以有读有写或者都写。

#### 与时间有关的错误

交互的并发进程，受限与处理器调度算法，无法，无法预知相对速度。

* 结果不唯一
* 永远等待

并发下，程序可能创立为多个进程。多个进程之间共享变量

并发程序设计考虑的存在风险，不能按顺序的思维去考虑。

结果不唯一：机票问题

永远等待：申请和归还内存资源问题。主存资源给等待队列，进队列和唤起的冲突

#### 进程的交互：竞争与协作

互斥关系是一种特殊的进程同步关系

同步就是一种等待关系。要跟人同步，就要双方等待。

#### 互斥与临界区

临界资源：共享而互斥的资源

临界区：控制临界资源的程序段。

##### 临界区调度原则

* 一次至多一个进程能够进入临界区内执行
* 如果已有在临界区的进程，则试图进入的其他进程应等待
* 临界区的进程需要在有限时间内退出

信号量PV操作编程，分析临界资源，互斥使用时候，进出得控制结构。并不关心得到临界资源之后怎么做（业务代码）。关心如何获得临界资源以及退出是控制结构如何表达

Peterson 无等待队列，纯软件算法。

信号量PV操作算法，对硬件没有额外要求，具有普世性。