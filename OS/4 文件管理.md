# 文件管理

基本的思路是管理磁盘的数据。直接访问磁盘，是层次非常低，难以使用的。

如果没有文件抽象，需要一张巨大的表来存储。同时，磁盘数据的存储保护非常难管理，需要把权限规定细到每一个扇区，因为基本的单位是扇区，表达存储保护的存储开销、读取开销都会变得巨大。因此，构建文件抽象是非常重要的。

构建文件抽象，从此对磁盘的数据使用可以通过“按名使用”的思想，这也是当初设计的重要目标。

文件的概念、文件的命名、分类、优点

#### 文件的概念

文件是具有符号名，逻辑上有完整意义的相关信息序列。

 FILE - Document，文件和文档是有区别的。

文件名识别文件，扩展名标识文件的特性。

如何从线性编址的存储器中使用目录按名存取的存储结构

#### 优点

方便使用，不需要考虑物理位置，只需要文件名

安全可考，文件系统具有安全保密保护措施，防止被破坏

文件可备份

文件可共享，不同用户进程可以访问统一文件，提高利用率。

#### 文件的使用

open打开，传入文件路径，传回文件描述符。

进程管理：PCB，文件管理：文件控制块，inode

每创建文件，都要创建文件控制块。

inode尺寸相同，按号连续排列，按号定位。找到目录项，从这里找到inode数据结构，inode中记录存储得时候的磁盘物理块

#### 文件物理结构

多重索引结构

教材P316 图6-9 卷结构

线性地址空间实现非线性层次目录结构，达到按名存取的方式

P306 6-2用户与操作系统视角下不同

316 - 317创建和读取的系统调用，对应的参数

文件打开之后，就是留下来的指针域

本质上是路径名定位到目录块，提取目录项，拿到inode数据结构读到主存中。创建文件都需要创建inode数据结构.。系统内部的对用户透明的inode